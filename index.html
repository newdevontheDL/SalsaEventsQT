<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Queenstown Salsa Events</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      margin: 0;
      background: #0b1020;
      color: #f5f5f5;
    }

    header {
      padding: 1.5rem 1rem;
      text-align: center;
      background: radial-gradient(circle at top, #ff4b6e, #0b1020 60%);
    }

    header h1 {
      margin: 0;
      font-size: 1.8rem;
      letter-spacing: 0.05em;
      text-transform: uppercase;
    }

    header p {
      margin: 0.4rem 0 0;
      opacity: 0.9;
    }

    .container {
      max-width: 900px;
      margin: 1.5rem auto 3rem;
      padding: 0 1rem;
    }

    .controls {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin-bottom: 1rem;
      align-items: center;
      justify-content: space-between;
    }

    .filter-buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
    }

    button.filter {
      border-radius: 999px;
      border: 1px solid #ff4b6e;
      padding: 0.4rem 0.9rem;
      background: transparent;
      color: #ffb3c3;
      cursor: pointer;
      font-size: 0.9rem;
      transition: background 0.15s, color 0.15s, transform 0.05s;
    }

    button.filter.active {
      background: #ff4b6e;
      color: #0b1020;
      font-weight: 600;
    }

    button.filter:hover {
      transform: translateY(-1px);
    }

    .info-text {
      font-size: 0.8rem;
      opacity: 0.7;
    }

    .events-list {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 1rem;
    }

    .event-card {
      background: #15192a;
      border-radius: 12px;
      padding: 0.9rem 1rem;
      border: 1px solid rgba(255, 255, 255, 0.05);
      display: flex;
      flex-direction: column;
      gap: 0.3rem;
    }

    .event-header {
      display: flex;
      justify-content: space-between;
      gap: 0.5rem;
      align-items: center;
    }

    .event-title {
      font-weight: 600;
      font-size: 1rem;
    }

    .event-chip {
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.06em;
      padding: 0.15rem 0.5rem;
      border-radius: 999px;
      border: 1px solid rgba(255, 255, 255, 0.2);
      opacity: 0.85;
    }

    .event-chip.class {
      border-color: #4bc9ff;
    }

    .event-chip.social {
      border-color: #ffb347;
    }

    .event-chip.special {
      border-color: #9b5cff;
    }

    .event-date-time {
      font-size: 0.9rem;
      opacity: 0.9;
    }

    .event-location {
      font-size: 0.85rem;
      opacity: 0.8;
    }

    .event-link a {
      font-size: 0.85rem;
      color: #ffb3c3;
      text-decoration: none;
    }

    .event-link a:hover {
      text-decoration: underline;
    }

    .no-events {
      text-align: center;
      opacity: 0.8;
      margin-top: 2rem;
    }

    .event-image-wrapper {
      margin: 0.4rem 0;
      overflow: hidden;
      border-radius: 8px;
    }

    .event-image {
      display: block;
      width: 100%;
      height: auto;
    }
  </style>
</head>
<body>
  <header>
    <h1>Queenstown Salsa & Bachata</h1>
    <p>Upcoming classes, socials & Latin events in Queenstown</p>
  </header>

  <main class="container">
    <section class="controls">
      <div class="filter-buttons">
        <button class="filter active" data-type="all">All</button>
        <button class="filter" data-type="class">Classes</button>
        <button class="filter" data-type="social">Socials</button>
        <button class="filter" data-type="special">Workshops & Specials</button>
      </div>
      <div class="info-text">
        Events are shown in local Queenstown time.
      </div>
    </section>

    <section id="events-container">
      <div class="no-events">Loading events…</div>
    </section>
  </main>

  <script>
    // ===== 1. EVENTS =====
    const events = [
      {
        title: "Bachata Social Night",
        dateTime: "2025-12-05T20:00:00",
        location: "Queenstown CBD",
        type: "social",
        link: "https://example.com/bachata-social",
        imageUrl: "img/bachata-social-2025-12-05.jpg"
      },
      {
        title: "Cuban Salsa - Beginners",
        dateTime: "2025-12-03T18:30:00",
        location: "Te Atamira, Remarkables Park, Frankton",
        type: "class",
        link: "https://example.com/cuban-beginners",
        imageUrl: "img/social.png"
      }
      // add more events here
    ];

    const eventsContainer = document.getElementById("events-container");
    const filterButtons = document.querySelectorAll("button.filter");

    function getLocalTodayMidnight() {
      const now = new Date();
      return new Date(now.getFullYear(), now.getMonth(), now.getDate());
    }

    function formatDateTime(date) {
      const datePart = date.toLocaleDateString(undefined, {
        weekday: "short",
        day: "numeric",
        month: "short"
      });
      const timePart = date.toLocaleTimeString(undefined, {
        hour: "2-digit",
        minute: "2-digit"
      });
      return datePart + " · " + timePart;
    }

    function renderEvents(filterType = "all") {
      const today = getLocalTodayMidnight();

      const upcoming = events
        .map(function (evt) {
          return Object.assign({}, evt, { dateObj: new Date(evt.dateTime) });
        })
        .filter(function (evt) {
          return evt.dateObj >= today;
        })
        .sort(function (a, b) {
          return a.dateObj - b.dateObj;
        })
        .filter(function (evt) {
          if (filterType === "all") return true;
          return evt.type === filterType;
        });

      if (upcoming.length === 0) {
        eventsContainer.innerHTML =
          '<div class="no-events">No upcoming events for this category yet. Check back soon.</div>';
        return;
      }

      var cardsHtml =
        '<div class="events-list">' +
        upcoming
          .map(function (evt) {
            var chipClass = evt.type || "other";
            var chipLabel =
              evt.type === "class"
                ? "Class"
                : evt.type === "social"
                ? "Social"
                : evt.type === "special"
                ? "Workshop / Special"
                : "Event";

            var imageBlock = evt.imageUrl
              ? '<div class="event-image-wrapper">' +
                '<img src="' + evt.imageUrl + '" alt="' + evt.title + ' poster" class="event-image" loading="lazy" />' +
                "</div>"
              : "";

            var linkBlock = evt.link
              ? '<div class="event-link"><a href="' +
                evt.link +
                '" target="_blank" rel="noopener noreferrer">More info / RSVP →</a></div>'
              : "";

            return (
              '<article class="event-card">' +
                '<div class="event-header">' +
                  '<div class="event-title">' + evt.title + "</div>" +
                  '<div class="event-chip ' + chipClass + '">' + chipLabel + "</div>" +
                "</div>" +
                imageBlock +
                '<div class="event-date-time">' + formatDateTime(evt.dateObj) + "</div>" +
                '<div class="event-location">' + evt.location + "</div>" +
                linkBlock +
              "</article>"
            );
          })
          .join("") +
        "</div>";

      eventsContainer.innerHTML = cardsHtml;
    }

    // filter buttons
    filterButtons.forEach(function (btn) {
      btn.addEventListener("click", function () {
        filterButtons.forEach(function (b) { b.classList.remove("active"); });
        btn.classList.add("active");
        var type = btn.dataset.type;
        renderEvents(type);
      });
    });

    // initial render
    renderEvents("all");
  </script>
</body>
</html>
